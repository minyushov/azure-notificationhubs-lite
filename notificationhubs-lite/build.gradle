apply plugin: 'com.android.library'
apply plugin: 'kotlin-android'
apply plugin: 'com.minyushov.bintray'

android {
  buildToolsVersion androidBuildToolsVersion
  compileSdkVersion androidCompileSdkVersion

  defaultConfig {
    minSdkVersion androidMinSdkVersion
    targetSdkVersion androidTargetSdkVersion
  }

  testOptions {
    unitTests {
      includeAndroidResources = true
    }
  }

  compileOptions {
    sourceCompatibility JavaVersion.VERSION_1_8
    targetCompatibility JavaVersion.VERSION_1_8
  }

  kotlinOptions {
    jvmTarget = "1.8"
    freeCompilerArgs = ["-XXLanguage:+NewInference"]
  }
}

dependencies {
  implementation "org.jetbrains.kotlin:kotlin-stdlib-jdk8:$kotlinVersion"
  implementation "org.jetbrains.kotlinx:kotlinx-coroutines-core:1.3.5"

  implementation "com.squareup.okio:okio:2.5.0"
  implementation "com.squareup.okhttp3:okhttp:4.5.0"

  testImplementation "androidx.test.ext:junit-ktx:1.1.2-alpha05"
  testImplementation "org.junit.jupiter:junit-jupiter-api:5.6.0"
  testImplementation "org.robolectric:robolectric:4.3.1"
  testImplementation "com.squareup.okhttp3:mockwebserver:4.5.0"
}

bintray {
  dryRun = false
  repo = "azure"
  groupId = "com.minyushov.azure"
  artifactId = "azure-notificationhubs-lite"
  version = "1.0.1"
  vcsUrl = "https://github.com/minyushov/azure-notificationhubs-lite.git"
  license = "Apache-2.0"
  docs = true
  docsSettings {
    configuration {
      jdkVersion = 8
      externalDocumentationLink {
        url = new URL("https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/")
      }
    }
  }
}